<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Metrics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="An infographics generator with 30+ plugins and 300+ options to display stats about your GitHub account and render them as SVG, Markdown, PDF or JSON!">
    <meta name="author" content="lowlighter">
    <meta property="og:image" content="/static/opengraph.png">
    <link rel="icon" href="/static/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body x-data="data" class="bg-slate-950 text-white">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-gray-900" :class="{'bg-yellow-700':dev}">
      <div class="flex items-center h-16 px-4 lg:px-8">
        <!-- Metrics version -->
        <a class="text-xl" href="/">
          <span>
            Metrics <span x-text="version"></span>
            <template x-if="dev">
              <sub class="text-sm">dev</sub>
            </template>
          </span>
        </a>
        <!-- Menu -->
        <div x-data="{expand:{menu:false, actions:false}}" class="flex flex-1 items-center justify-end md:justify-between">
          <div class="hidden md:block"></div>
          <div class="flex items-center gap-4">
            <div :class="{flex:expand.menu, hidden:!expand.menu}" class="absolute left-0 top-full flex-col items-end gap-4 w-full bg-gray-900 md:flex-row md:static md:flex md:items-center md:w-auto md:bg-transparent">
              <!-- User menu -->
              <template x-if="user?.login">
                <div class="relative w-full md:w-auto">
                  <!-- User profile -->
                  <div @click="expand.actions = !expand.actions" :class="{'md:bg-gray-700':expand.actions}" class="flex items-center h-full p-2 rounded-md transition md:cursor-pointer md:hover:bg-gray-800">
                    <img :src="user.avatar" class="mr-2 h-8 w-8 rounded-full object-cover">
                    <span x-text="user.login" class="font-bold"></span>
                  </div>
                  <!-- User menu actions -->
                  <div :class="{'md:hidden':!expand.actions}" class="md:absolute md:end-0 md:w-56 md:mt-1 md:border md:border-gray-700 md:rounded-md md:bg-gray-800 md:shadow-lg">
                    <div class="p-2">
                      <a href="/login/review" class="flex items-center p-2.5 rounded-md transition hover:bg-gray-800 md:hover:bg-gray-900">
                        <x-octicon x-data="{icon:'key'}" class="mr-2"></x-octicon>
                        Review permissions
                      </a>
                      <a href="/login/revoke" class="flex items-center p-2.5 rounded-md transition hover:bg-gray-800 md:hover:bg-gray-900">
                        <x-octicon x-data="{icon:'sign-out'}" class="mr-2"></x-octicon>
                        Sign-out
                      </a>
                    </div>
                  </div>
                </div>
              </template>
              <!-- Sign-in with GitHub -->
              <template x-if="user && !user.login">
                <a href="/login" class="p-2.5 rounded-md bg-gray-950 transition hover:bg-gray-800">
                  <x-octicon x-data="{icon:'github'}" class="inline-block"></x-octicon>
                  Sign-in with GitHub
                </a>
              </template>
              <!-- Remaining requests -->
              <template x-if="ratelimit?.error === null">
                <div class="w-fit p-2.5 text-xs md:flex md:flex-col md:items-center md:p-0">
                  <div class="flex justify-between w-full"><b class="mr-4">REST</b><span x-text="ratelimit.core"></span></div>
                  <div class="flex justify-between w-full"><b class="mr-4">GraphQL</b><span x-text="ratelimit.graphql"></span></div>
                  <div class="flex justify-between w-full"><b class="mr-4">Search</b><span x-text="ratelimit.search"></span></div>
                </div>
              </template>
            </div>
            <!-- Mobile menu -->
            <button @click="expand.menu = !expand.menu" :class="{'bg-gray-700':expand.menu}" class="block p-2.5 rounded-md bg-gray-950 transition hover:bg-gray-800 md:hidden">
              <x-octicon x-data="{icon:'menu'}" class="h-5 w-5"></x-octicon>
            </button>
          </div>
        </div>
      </div>
    </header>
    <main x-data="{app:$store.app, selected:{mode:''}, metrics:{config:{plugins:[], presets:{default:{}}}}}">
      <!-- About -->
      <section class="relative overflow-hidden">
        <div class="container mx-auto px-2 py-32">
          <h1 class="text-4xl">Craft your profile infographics</h1>
          <h1 class="text-4xl mb-4">the way you want</h1>
          <div>
            <x-octicon x-data="{icon:'valid'}" class="inline-block"></x-octicon>
            Customize them with a large choice options
          </div>
          <div>
            <x-octicon x-data="{icon:'valid'}" class="inline-block"></x-octicon>
            Export and share them anywhere
          </div>
          <div>
            <x-octicon x-data="{icon:'valid'}" class="inline-block"></x-octicon>
            Using free and open-sourced code
          </div>
        </div>
        <template x-if="false">
          <div class="absolute top-0 right-0 w-2/4 flex gap-2 origin-center -z-10 opacity-75" style="transform: rotateX(50deg) rotateZ(40deg) translate(-25%, -25%); transform-style: preserve-3d;" x-data="{imgs:[
            '/octocat?mock=true&plugins=[{calendar:{view:isometric}}]',
            '/octocat?mock=true&plugins=[{rss:{feed:https://news.ycombinator.com/rss}}]',
            '/octocat?mock=true&plugins=[{lines:{}}]',
            '/octocat?mock=true&plugins=[{calendar:{view:top-down,colors:winter}}]',
          ]}">
            <template x-for="i in [0, 1]">
              <div class="w-2/4" :key="i">
                <template x-for="(img, j) in imgs.filter((_, j) => (j%2) === i)">
                  <div class="bg-white rounded-lg shadow p-4 mb-2" :key="j">
                    <img :src="img" alt="">
                  </div>
                </template>
              </div>
            </template>
          </div>
        </template>
        <div class="absolute bottom-0 w-full h-40 bg-gradient-to-t from-slate-950 to-transparent z-40"></div>
      </section>

      <!-- v4 notice -->
      <section class="container mx-auto my-1 p-2">
        <div class="p-2 rounded-md bg-yellow-200 border border-yellow-700 text-yellow-700">
          <x-octicon x-data="{icon:'rocket'}" class="inline-block"></x-octicon>
          Metrics v4 is still in development and some features may not be available yet.
          Please refer to <a class="font-bold text-sky-300" href="https://github.com/lowlighter/metrics/issues/1573">#1573</a> for more informations
        </div>
      </section>

      <!-- Development notice -->
      <template x-if="dev">
        <section class="container mx-auto my-1 p-2">
          <div class="p-2 rounded-md bg-yellow-200 border border-yellow-700 text-yellow-700">
            <x-octicon x-data="{icon:'experimental'}" class="inline-block"></x-octicon>
            Metrics is currently in running in a development environment.
          </div>
        </section>
      </template>

      <!-- Invalid token notice -->
      <template x-if="ratelimit?.error === 401">
        <section class="container mx-auto my-1 p-2">
          <div class="p-2 rounded-md bg-red-200 border border-red-700 text-red-700">
            <x-octicon x-data="{icon:'invalid'}" class="inline-block"></x-octicon>
            Configured GitHub API token may be invalid
          </div>
        </section>
      </template>

      <!-- Craft mode -->
      <template x-if="true">
        <section class="container mx-auto px-2 my-8">
          <h2 class="text-2xl mb-4">1️⃣ Choose a way to generate infographics</h2>
          <fieldset class="grid grid-cols-1 gap-8 md:grid-cols-3">
            <template x-data="{modes:[
              {value:'web', name:'Web URL', description:'Create a shareable link that you can embed anywhere'},
              {value:'actions', name:'GitHub Actions', description:'Generate a GitHub Actions workflow for your repository'},
              {value:'server', name:'Deploy', description:'Create a configuration file for self-hosted solutions'},
            ]}" x-for="{value, name, description} in modes">
              <div :key="value">
                <input x-model="selected.mode" :id="`app.mode.${value}`" :value="value" name="app.mode" type="radio" class="peer hidden">
                <label :for="`app.mode.${value}`" class="block bg-gray-950 h-full p-2.5 border border-gray-800 rounded-md cursor-pointer transition hover:bg-gray-800 peer-checked:bg-gray-900 peer-checked:border-sky-500">
                  <div class="text-sky-500">
                    <x-octicon x-data="{icon:value}" class="inline-block"></x-octicon>
                    <span class="ml-1" x-text="name"></span>
                  </div>
                  <p class="mt-1 text-zinc-400" x-text="description"></p>
                </label>
              </div>
            </template>
          </fieldset>
        </section>
      </template>

      <!-- Compatibility migration helper -->
      <template x-if="selected.mode === 'actions'" x-data="{compat:{enable:false, status:'empty', input:'', config:null, messages:''}}">
        <section class="container mx-auto px-2 my-8">
          <h2 class="text-xl mb-4">*️⃣ Optionally convert an existing v3.x configuration to v4.x</h2>
          <label class="inline-block relative mb-2 h-6 w-12 cursor-pointer">
            <input x-model="compat.enable" type="checkbox" class="peer hidden">
            <span class="absolute inset-0 rounded-full bg-gray-700 transition peer-checked:bg-sky-500"></span>
            <span class="absolute inset-y-0 start-0 m-1 h-4 w-4 rounded-full bg-white transition-all peer-checked:start-6"></span>
          </label>
          <template x-if="compat.enable">
            <div>
              <!-- User input -->
              <div class="my-2">
                Paste v3.x configuration <code>inputs</code> below:
              </div>
              <textarea x-model="compat.input" @input="compat.status = 'processing'; app.updateCompatConfig(compat)" placeholder="token: ${{ github.token }}&#10;config_timezone: Europe/Paris&#10;plugin_isocalendar: yes&#10;plugin_isocalendar_duration: full-year" class="w-full bg-gray-950 px-3 py-1.5 border border-gray-800 rounded-md outline-none focus:border-sky-500 min-h-[8em]"></textarea>
              <div class="flex items-center mt-1 mb-6" :class="{[`text-${{valid:'green', invalid:'red', processing:'blue', empty:'zinc'}[compat.status]}-700`]:true}">
                <template x-for="icon in [compat.status]">
                  <x-octicon :class="{'animate-spin':compat.status === 'processing'}"></x-octicon>
                </template>
                <span class="ml-1">Configuration is <span x-text="{processing:'being processed'}[compat.status] ?? compat.status"></span></span>
              </div>
              <!-- Transpiled configuration and migration messages -->
              <article class="grid grid-cols-1 gap-4 mb-4 lg:grid-cols-2 lg:gap-8">
                <div class="bg-black p-2 border border-gray-800 rounded-md overflow-hidden">
                  <template x-if="compat.config">
                    <pre class="h-full overflow-auto"><code x-html="app.yaml(compat.config)" class="language-yaml"></code></pre>
                  </template>
                  <template x-if="!compat.config">
                    <pre class="h-full overflow-auto"><code class="language-yaml"><span class="hljs-comment"># Transpiled configuration will appear here</span></code></pre>
                  </template>
                </div>
                <div x-html="compat.messages || 'Everything looks good !'" class="p-2 border border-gray-800 rounded-md overflow-hidden"></div>
              </article>
              <!-- User actions -->
              <nav class="flex gap-2 lg:mb-8">
                <div @click="metrics = compat.config" :class="{'cursor-not-allowed opacity-50':compat.status !== 'valid', 'cursor-pointer':compat.status === 'valid'}" class="flex items-center p-2 bg-red-950 rounded-md border border-transparent text-sm transition hover:bg-red-800 hover:text-sky-100">
                  <x-octicon x-data="{icon:'import'}" class="mr-1"></x-octicon>
                  Import configuration
                </div>
              </nav>
            </div>
          </template>
        </section>
      </template>

      <!-- Global settings and presets -->
      <template x-if="selected.mode">
        <section class="container mx-auto px-2 my-8">
          <h2 class="text-2xl mb-4">2️⃣ Configure global settings</h2>
          <!-- Global settings -->
          <article x-data="{edit:false}">
            <div class="bg-gray-900 border border-gray-800 rounded-md">
              <div class="bg-gray-950 p-2 border-b border-gray-800 rounded-t-md">
                <h3 class="text-lg flex justify-between">
                  <span>⚙️ Global configuration</span>
                  <span class="text-zinc-400" x-text="selected.mode"></span>
                </h3>
              </div>
              <nav class="flex gap-2 p-2 border-b border-gray-800">
                <div @click="edit = !edit" :class="{'bg-gray-900 border-sky-500':edit}" class="bg-gray-950 flex items-center border border-transparent rounded-md p-2 text-sm cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                  <x-octicon x-data="{icon:'edit'}" class="mr-1"></x-octicon>
                  Edit
                </div>
              </nav>
              <div class="bg-black p-2">
                <pre><code class="language-yaml" x-html="app.yaml(metrics)"></code></pre>
              </div>
              <template x-if="edit">
                <div class="p-2 border-b border-gray-800">
                  <x-schema-inputs x-data="{inputs:modes[selected.mode], path:[], trim:undefined, model:metrics}"></x-schema-inputs>
                </div>
              </template>
            </div>
          </article>
          <!-- Presets -->
          <article class="mt-4" x-data="{edit:'', expand:''}">
            <div class="bg-gray-900 border border-gray-800 rounded-md">
              <div class="bg-gray-950 p-2 border-b border-gray-800 rounded-t-md">
                <h3 class="text-lg flex justify-between">
                  <span>🍱 Configure presets</span>
                </h3>
              </div>
              <nav class="flex gap-2 p-2 border-b border-gray-800">
                <template x-for="(_, preset) in metrics.config.presets">
                  <div @click="expand = expand === preset ? (edit = '') : preset" :class="{'border-sky-500':expand === preset, 'border-transparent':expand !== preset}" class="bg-gray-950 flex items-center rounded-md p-2 text-sm border cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                    <x-octicon x-data="{icon:'preset'}" class="mr-1"></x-octicon>
                    <span x-text="`${preset.charAt(0).toLocaleUpperCase()}${preset.slice(1)}`"></span>
                  </div>
                </template>
                <div x-data="{preset:''}" class="flex">
                  <input x-model="preset" @click="expand = ''" @keyup.enter="metrics.config.presets[preset] = {}; expand = edit = preset; preset = ''; $el.blur()" type="text" placeholder="Create a new preset" class="grow bg-gray-950 rounded-l-md px-3 py-1.5 outline-none">
                  <div @click="metrics.config.presets[preset] = {}; expand = edit = preset; preset = ''" class="bg-green-950 flex items-center rounded-r-md p-2 border border-gray-800 cursor-pointer transition hover:bg-green-800">
                    <x-octicon x-data="{icon:'plus'}" class="text-white"></x-octicon>
                  </div>
                </div>
              </nav>
              <template x-if="expand">
                <nav class="flex gap-2 p-2 border-b border-gray-800">
                  <div @click="edit = edit === expand ? '' : expand" :class="{'border-sky-500':edit === expand, 'border-transparent':edit !== expand}" class="bg-gray-950 flex items-center rounded-md p-2 text-sm border cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                    <x-octicon x-data="{icon:'edit'}" class="mr-1"></x-octicon>
                    Edit
                  </div>
                  <template x-if="expand !== 'default'">
                    <div @click="delete metrics.config.presets[expand]; expand = edit = ''" class="cursor-not-allowed bg-red-950 flex items-center rounded-md p-2 text-sm border border-transparent transition hover:bg-red-800 hover:text-sky-100">
                      <x-octicon x-data="{icon:'remove'}" class="mr-1"></x-octicon>
                      Remove
                    </div>
                  </template>
                </nav>
              </template>
              <template x-if="expand">
                <div class="bg-black p-2">
                  <pre><code class="language-yaml" x-html="app.yaml(metrics.config.presets[expand])"></code></pre>
                </div>
              </template>
              <template x-if="edit">
                <div class="p-2 border-b border-gray-800">
                  <form>
                    <x-schema-inputs x-data="{inputs:presets.schema, path:['presets', edit], trim:/^presets\./, model:metrics.config.presets[edit]}" ></x-schema-inputs>
                  </form>
                </div>
              </template>
            </div>
          </article>
        </section>
      </template>

      <!-- Plugins and processors settings -->
      <template x-if="true || selected.mode">
        <section class="container mx-auto px-2 my-8" x-data="{edited:{plugin:NaN, processor:NaN}, expand:{plugins:!metrics.config.plugins.length, processors:NaN}}">
          <h2 class="text-2xl mb-4">3️⃣ Configure plugins and processors</h2>
          <!-- Plugins -->
          <template x-for="(plugin, i) of metrics.config.plugins">
            <article :key="i" class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8 mb-4 lg:mb-8" x-data="{about:plugins.find(({id}) => plugin.id === id)}">
              <div class="bg-gray-900 border border-gray-800 rounded-md overflow-hidden">
                <!-- Plugin header -->
                <div class="bg-gray-950 p-2 border-b border-gray-800 rounded-t-md">
                  <h3 class="text-lg flex justify-between">
                    <span x-text="about.name"></span>
                    <div class="text-zinc-400 flex items-center">
                      <span x-text="`#${i}`"></span>
                      <x-octicon x-data="{icon:'drag'}" class="ml-1.5 opacity-0"></x-octicon>
                    </div>
                  </h3>
                  <h4 x-html="await app.markdown(about.description)" class="text-zinc-400"></h4>
                  <h4>
                    <template x-for="{type, value} of [...(about.supports.length ? about.supports : ['user', 'organization', 'repository']).map(type => ({type})), ...about.scopes.map(scope => ({type:'scope', value:scope})), ...about.permissions.map(permission => ({type:'permission', value:permission}))]">
                      <div :key="value" class="inline-flex items-center rounded-full overflow-hidden bg-zinc-600 text-sm mt-1 mr-1">
                        <div class="flex items-center bg-zinc-800 px-1.5" >
                          <x-octicon x-data="{icon:type}" class="mr-1"></x-octicon>
                          <span x-text="type"></span>
                        </div>
                        <template x-if="value">
                          <span x-text="value" class="px-1.5"></span>
                        </template>
                      </div>
                    </template>
                  </h4>
                </div>
                <!-- User actions -->
                <nav class="flex gap-2 p-2 border-b border-gray-800">
                  <div @click="edited.plugin = edited.plugin === i ? (edited.processor = NaN) : i" class="bg-gray-950 flex items-center rounded-md p-2 text-sm border cursor-pointer transition hover:bg-gray-800 hover:text-sky-500" :class="{'border-sky-500':edited.plugin === i, 'border-transparent':edited.plugin !== i}">
                    <x-octicon x-data="{icon:'edit'}" class="mr-1"></x-octicon>
                    Edit
                  </div>
                  <div @click="app.renderPlugin({plugin:i})" class="bg-gray-950 flex items-center rounded-md p-2 text-sm border border-transparent cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                    <x-octicon x-data="{icon:'render'}" class="mr-1"></x-octicon>
                    Render
                  </div>
                  <div @click="edited.plugin = metrics.config.plugins.push(JSON.parse(JSON.stringify(metrics.config.plugins[i]))) - 1; expand.plugins = false; expand.processors = NaN" class="bg-gray-950 flex items-center rounded-md p-2 text-sm border border-transparent transition hover:bg-gray-800 hover:text-sky-500">
                    <x-octicon x-data="{icon:'clone'}" class="mr-1"></x-octicon>
                    Duplicate
                  </div>
                  <div @click="metrics.config.plugins.splice(i, 1); edited.plugin = NaN; expand.plugins = !metrics.config.plugins.length" class="bg-red-950 flex items-center rounded-md p-2 text-sm border border-transparent cursor-pointer transition hover:bg-red-800 hover:text-sky-100">
                    <x-octicon x-data="{icon:'remove'}" class="mr-1"></x-octicon>
                    Remove
                  </div>
                </nav>
                <!-- Plugin YAML -->
                <div class="bg-black p-2">
                  <pre><code x-html="app.yaml(metrics.config.plugins[i])" class="language-yaml"></code></pre>
                </div>
                <!-- Plugin documentation -->
                <template x-if="about.docs.length">
                  <div :class="{hidden:edited.plugin !== i}" class="p-2 border-b border-gray-800">
                    <div class="font-bold">Documentations</div>
                    <template x-for="{title, type, content} in about.docs">
                      <details class="group rounded-md mt-1 overflow-hidden" :class="{[{warning:'bg-yellow-950'}[type] ?? 'bg-gray-950']:true}">
                        <summary class="flex items-center p-2 cursor-pointer rounded-t-md border border-transparent transition hover:bg-gray-800 hover:text-sky-500 group-open:border-sky-500">
                          <x-octicon x-data="{icon:'docs'}" class="mr-1.5"></x-octicon>
                          <span x-html="await app.markdown(title)"></span>
                        </summary>
                        <div x-html="await app.markdown(content)" class="markdown bg-black p-2"></div>
                      </details>
                    </template>
                  </div>
                </template>
                <!-- Plugin arguments -->
                <div :class="{hidden:edited.plugin !== i}" class="p-2 border-b border-gray-800">
                  <div class="font-bold">Arguments</div>
                  <template x-if="Object.keys(about.inputs.properties).length">
                    <form>
                      <x-schema-inputs x-data="{inputs:about.inputs, path:['plugins', i, 'args'], trim:/^plugins\[\d+\]\.args/, model:metrics.config.plugins[i].args}"></x-schema-inputs>
                    </form>
                  </template>
                  <template x-if="!Object.keys(about.inputs.properties).length">
                    <span class="text-zinc-400 italic">This plugin does not accept any arguments</span>
                  </template>
                </div>
                <!-- Plugin context -->
                <div :class="{hidden:edited.plugin !== i}" class="p-2 border-b border-gray-800">
                  <div class="font-bold">Context</div>
                  <div class="block mb-2">
                    <div class="font-bold">.preset</div>
                  </div>
                  <select x-model="metrics.config.plugins[i].preset" class="w-full bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                    <template x-for="(_, preset) in metrics.config.presets">
                      <option :value="preset" x-text="`${preset.charAt(0).toLocaleUpperCase()}${preset.slice(1)}`"></option>
                    </template>
                  </select>
                  <div x-data="{override:false}">
                    <div class="block mt-2">
                      <div class="font-bold mb-2">Override preset values</div>
                      <label class="inline-block relative h-6 w-12 cursor-pointer mb-2">
                        <input type="checkbox" class="peer hidden" x-model="override"/>
                        <span class="absolute inset-0 rounded-full bg-gray-700 transition peer-checked:bg-sky-500"></span>
                        <span class="absolute inset-y-0 start-0 m-1 h-4 w-4 rounded-full bg-white transition-all peer-checked:start-6"></span>
                      </label>
                    </div>
                    <template x-if="override">
                      <form>
                        <x-schema-inputs x-data="{inputs:presets.plugins, path:['plugins', i], trim:/^plugins\[\d+\]/, model:metrics.config.plugins[i]}"></x-schema-inputs>
                      </form>
                    </template>
                  </div>
                </div>
                <!-- Plugin processors -->
                <template x-for="(processor, j) of plugin.processors">
                  <div class="bg-gray-950 border border-gray-800 rounded-md m-2" :key="j" x-data="{about:processors.find(({id}) => processor.id === id), override:false}">
                    <!-- Processor header -->
                    <div class="p-2 border-b border-gray-800 rounded-t-md">
                      <h3 class="text-lg flex justify-between">
                        <span x-text="about.name"></span>
                        <span class="text-zinc-400 flex items-center">
                          <span x-text="`#${j}`"></span>
                          <x-octicon class="ml-1.5 opacity-0" x-data="{icon:'drag'}"></x-octicon>
                        </span>
                      </h3>
                      <h4 x-html="await app.markdown(about.description)" class="text-zinc-400"></h4>
                      <h4 :class="{hidden:edited.plugin !== i}">
                        <template x-for="{type, value} of [...about.supports.map(type => ({type:'mime', value:type})), ...about.scopes.map(scope => ({type:'scope', value:scope})), ...about.permissions.map(permission => ({type:'permission', value:permission}))]">
                          <div class="inline-flex items-center rounded-full overflow-hidden bg-zinc-600 text-sm mt-1 mr-1" :key="value">
                            <div class="flex items-center bg-zinc-800 px-1.5" >
                              <x-octicon class="mr-1" x-data="{icon:type}"></x-octicon>
                              <span x-text="type"></span>
                            </div>
                            <template x-if="value">
                              <span class="px-1.5" x-text="value"></span>
                            </template>
                          </div>
                        </template>
                      </h4>
                    </div>
                    <!-- User actions -->
                    <nav class="flex gap-2 p-2 border-b border-gray-800" :class="{hidden:edited.plugin !== i}">
                      <div @click="edited.processor = edited.processor === j ? NaN : j" class="bg-gray-800 flex items-center rounded-md p-2 text-sm border cursor-pointer transition hover:bg-gray-700 hover:text-sky-500" :class="{'border-sky-500':(edited.plugin === i)&&(edited.processor === j), 'border-transparent':!((edited.plugin === i)&&(edited.processor === j))}">
                        <x-octicon class="mr-1" x-data="{icon:'edit'}"></x-octicon>
                        Edit
                      </div>
                      <div @click="edited.processor = metrics.config.plugins[i].processors.push(JSON.parse(JSON.stringify(metrics.config.plugins[i].processors[j]))) - 1; expand.plugins = false; expand.processors = NaN" class="bg-gray-800 flex items-center rounded-md p-2 text-sm border border-transparent transition hover:bg-gray-700 hover:text-sky-500">
                        <x-octicon class="mr-1" x-data="{icon:'clone'}"></x-octicon>
                        Duplicate
                      </div>
                      <div @click="metrics.config.plugins[i].processors.splice(j, 1); edited.processor = NaN; expand.processors = NaN" class="bg-red-900 flex items-center rounded-md p-2 text-sm border border-transparent cursor-pointer transition hover:bg-red-800 hover:text-sky-100">
                        <x-octicon class="mr-1" x-data="{icon:'remove'}"></x-octicon>
                        Remove
                      </div>
                    </nav>
                    <!-- Processor documentation -->
                    <template x-if="about.docs.length">
                      <div class="p-2 border-b border-gray-800" :class="{hidden:!((edited.plugin === i)&&(edited.processor === j))}">
                        <div class="font-bold">Documentations</div>
                        <template x-for="{title, type, content} in about.docs">
                          <details class="group rounded-md mt-1 overflow-hidden" :class="{[{warning:'bg-yellow-950'}[type] ?? 'bg-gray-950']:true}">
                            <summary class="flex items-center p-2 cursor-pointer rounded-t-md border border-transparent transition hover:bg-gray-800 hover:text-sky-500 group-open:border-sky-500">
                              <x-octicon class="mr-1.5" x-data="{icon:'docs'}"></x-octicon>
                              <span x-html="await app.markdown(title)"></span>
                            </summary>
                            <div class="markdown bg-black p-2" x-html="await app.markdown(content)"></div>
                          </details>
                        </template>
                      </div>
                    </template>
                    <!-- Processor arguments -->
                    <div class="p-2 border-b border-gray-800" :class="{hidden:!((edited.plugin === i)&&(edited.processor === j))}">
                      <div class="font-bold">Arguments</div>
                      <template x-if="Object.keys(about.inputs.properties).length">
                        <form>
                          <x-schema-inputs x-data="{inputs:about.inputs, path:['plugins', i, 'processors', j, 'args'], trim:/^plugins\[\d+\]\.processors\[\d+\]\.args/, model:metrics.config.plugins[i].processors[j].args}"></x-schema-inputs>
                        </form>
                      </template>
                      <template x-if="!Object.keys(about.inputs.properties).length">
                        <span class="text-zinc-400 italic">This processor does not accept any arguments</span>
                      </template>
                    </div>
                    <!-- Processor context -->
                    <div class="p-2 border-b border-gray-800" :class="{hidden:!((edited.plugin === i)&&(edited.processor === j))}">
                      <div class="font-bold">Context</div>
                      <div class="block mb-2">
                        <div class="font-bold">.preset</div>
                      </div>
                      <select x-model="metrics.config.plugins[i].processors[j].preset" class="w-full bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                        <template x-for="(_, preset) in metrics.config.presets">
                          <option :value="preset" x-text="`${preset.charAt(0).toLocaleUpperCase()}${preset.slice(1)}`"></option>
                        </template>
                      </select>
                      <div>
                        <div>
                          <div class="font-bold mb-2">Override preset values</div>
                          <label class="inline-block relative h-6 w-12 cursor-pointer mb-2">
                            <input type="checkbox" class="peer hidden" x-model="override"/>
                            <span class="absolute inset-0 rounded-full bg-gray-700 transition peer-checked:bg-sky-500"></span>
                            <span class="absolute inset-y-0 start-0 m-1 h-4 w-4 rounded-full bg-white transition-all peer-checked:start-6"></span>
                          </label>
                        </div>
                        <template x-if="override">
                          <form>
                            <x-schema-inputs x-data="{inputs:presets.processors, path:['plugins', i, 'processors', j], trim:/^plugins\[\d+\]\.processors\[\d+\]/, model:metrics.config.plugins[i].processors[j]}"></x-schema-inputs>
                          </form>
                        </template>
                      </div>
                    </div>
                  </div>
                </template>
                <!-- Add new processor -->
                <div class="bg-gray-950 border border-dashed rounded-md m-2 overflow-hidden" :class="{hidden:edited.plugin !== i}">
                  <h3 class="pl-4 py-2 text-lg cursor-pointer rounded-t-md transition hover:bg-gray-800" @click="expand.processors = expand.processors === i ? NaN : i">Add a processor</h3>
                  <ul class="px-2 mb-2" :class="{hidden:expand.processors !== i}">
                    <template x-for="processor of processors">
                      <li :key="processor.id">
                        <div @click="edited.processor = metrics.config.plugins[i].processors.push({id:processor.id, args:{}}) - 1; expand.plugins = false; expand.processors = NaN" class="flex items-center justify-between rounded-md text-zinc-400 px-2 py-1 cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                          <div x-text="processor.name"></div>
                        </div>
                      </li>
                    </template>
                  </ul>
                </div>
              </div>
              <!-- Preview -->
              <div class="preview relative border border-gray-800 rounded-md overflow-hidden">
                <div class="absolute">
                  <img src="" alt="" class="m-2">
                </div>
              </div>
            </article>
          </template>
          <!-- Add new plugin -->
          <article class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8">
            <div class="bg-gray-900 border border-gray-800 rounded-md">
              <div class="bg-gray-950 border border-dashed rounded-md m-2">
                <h3 @click="expand.plugins = !expand.plugins" class="pl-4 py-2 text-lg cursor-pointer rounded-t-md transition hover:bg-gray-800">Add a plugin</h3>
                <ul :class="{hidden:!expand.plugins}" class="px-2 mb-2">
                  <template x-for="plugin of plugins">
                    <li :key="plugin.id">
                      <div @click="edited.plugin = metrics.config.plugins.push({id:plugin.id, args:{}, processors:[]}) - 1; expand.plugins = false; expand.processors = NaN" class="rounded-md text-zinc-400 px-2 py-1 cursor-pointer transition hover:bg-gray-800 hover:text-sky-500">
                        <div class="flex items-center justify-between">
                          <div x-text="plugin.name"></div>
                          <div class="flex">
                            <template x-for="icon in (plugin.supports.length ? plugin.supports : ['user', 'organization', 'repository'])">
                              <x-octicon x-data="{icon}" :key="icon" class="mr-1"></x-octicon>
                            </template>
                          </div>
                        </div>
                      </div>
                    </li>
                  </template>
                </ul>
              </div>
            </div>
            <div class="preview border border-gray-800 rounded-md overflow-hidden"></div>
          </article>
        </section>
      </template>

      <!-- Result -->
      <template x-if="true">
        <section class="container mx-auto px-2 my-8">
          <h2 class="text-2xl mb-4">4️⃣ You're all set!</h2>
          <template x-if="selected.mode === 'web'">
            <div>
              <pre @click="app.copyToClipboard($event)" class="bg-gray-900 rounded-md p-2 cursor-pointer transition hover:bg-gray-800"><code class="language-html whitespace-break-spaces" x-html="app.yaml(metrics)"></code></pre>
            </div>
          </template>
          <template x-if="selected.mode !== 'web'">
            <div>
              <pre @click="app.copyToClipboard($event)" class="bg-gray-900 rounded-md p-2"><code class="language-yaml" x-html="app.yaml(metrics)"></code></pre>
            </div>
          </template>
        </section>
      </template>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 mt-16">
      <div class="max-w-screen-xl container mx-auto p-4">
        <ul class="flex flex-wrap justify-center gap-8">
          <li>
            <a class="text-zinc-400 transition hover:text-sky-500" href="https://github.com/lowlighter/metrics">
              Source code
            </a>
          </li>
          <li>
            <a class="text-zinc-400 transition hover:text-sky-500" href="https://github.com/lowlighter/metrics/blob/main/LICENSE">
              License
            </a>
          </li>
          <li>
            <a class="text-zinc-400 transition hover:text-sky-500" href="https://github.com/marketplace/actions/metrics-embed">
              GitHub Action
            </a>
          </li>
          <li>
            <a class="text-zinc-400 transition hover:text-sky-500" href="https://github.com/sponsors/lowlighter">
              Sponsor
            </a>
          </li>
        </ul>
      </div>
    </footer>

    <!-- Alpine component: octicon (icon: string) -->
    <template x-component="octicon">
      <div style="margin-bottom: -2px;">
        <template x-if="icon === 'github'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path></svg>
        </template>
        <template x-if="icon === 'key'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M10.5 0a5.499 5.499 0 1 1-1.288 10.848l-.932.932a.749.749 0 0 1-.53.22H7v.75a.749.749 0 0 1-.22.53l-.5.5a.749.749 0 0 1-.53.22H5v.75a.749.749 0 0 1-.22.53l-.5.5a.749.749 0 0 1-.53.22h-2A1.75 1.75 0 0 1 0 14.25v-2c0-.199.079-.389.22-.53l4.932-4.932A5.5 5.5 0 0 1 10.5 0Zm-4 5.5c-.001.431.069.86.205 1.269a.75.75 0 0 1-.181.768L1.5 12.56v1.69c0 .138.112.25.25.25h1.69l.06-.06v-1.19a.75.75 0 0 1 .75-.75h1.19l.06-.06v-1.19a.75.75 0 0 1 .75-.75h1.19l1.023-1.025a.75.75 0 0 1 .768-.18A4 4 0 1 0 6.5 5.5ZM11 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>
        </template>
        <template x-if="icon === 'sign-out'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 0 1 0 1.5h-2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 0 1 0 1.5h-2.5A1.75 1.75 0 0 1 2 13.25Zm10.44 4.5-1.97-1.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.97-1.97H6.75a.75.75 0 0 1 0-1.5Z"></path></svg>
        </template>
        <template x-if="icon === 'menu'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M1 2.75A.75.75 0 0 1 1.75 2h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 2.75Zm0 5A.75.75 0 0 1 1.75 7h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 7.75ZM1.75 12h12.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Z"></path></svg>
        </template>
        <template x-if="icon === 'preset'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M15 2.75a.75.75 0 0 1-.75.75h-4a.75.75 0 0 1 0-1.5h4a.75.75 0 0 1 .75.75Zm-8.5.75v1.25a.75.75 0 0 0 1.5 0v-4a.75.75 0 0 0-1.5 0V2H1.75a.75.75 0 0 0 0 1.5H6.5Zm1.25 5.25a.75.75 0 0 0 0-1.5h-6a.75.75 0 0 0 0 1.5h6ZM15 8a.75.75 0 0 1-.75.75H11.5V10a.75.75 0 1 1-1.5 0V6a.75.75 0 0 1 1.5 0v1.25h2.75A.75.75 0 0 1 15 8Zm-9 5.25v-2a.75.75 0 0 0-1.5 0v1.25H1.75a.75.75 0 0 0 0 1.5H4.5v1.25a.75.75 0 0 0 1.5 0v-2Zm9 0a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75Z"></path></svg>
        </template>
        <template x-if="icon === 'clone'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M10.5 3a.75.75 0 0 1 .75.75v1h1a.75.75 0 0 1 0 1.5h-1v1a.75.75 0 0 1-1.5 0v-1h-1a.75.75 0 0 1 0-1.5h1v-1A.75.75 0 0 1 10.5 3Z"></path><path d="M6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25v-7.5C5 .784 5.784 0 6.75 0ZM6.5 1.75v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25Z"></path><path d="M1.75 5A1.75 1.75 0 0 0 0 6.75v7.5C0 15.216.784 16 1.75 16h7.5A1.75 1.75 0 0 0 11 14.25v-1.5a.75.75 0 0 0-1.5 0v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path></svg>
        </template>
        <template x-if="icon === 'drag'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M10 13a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm0-4a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm-4 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm5-9a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6 5a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>
        </template>
        <template x-if="icon === 'web'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
        </template>
        <template x-if="icon === 'actions'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>
        </template>
        <template x-if="icon === 'server'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 7.25A5.225 5.225 0 0 1 7.25 2a5.222 5.222 0 0 1 4.767 3.029A4.472 4.472 0 0 1 16 9.5c0 2.505-1.995 4.5-4.5 4.5h-8A3.474 3.474 0 0 1 0 10.5c0-1.41.809-2.614 2.001-3.17Zm1.54.482a.75.75 0 0 1-.556.832c-.86.22-1.484.987-1.484 1.936 0 1.124.876 2 2 2h8c1.676 0 3-1.324 3-3s-1.324-3-3-3a.75.75 0 0 1-.709-.504A3.72 3.72 0 0 0 7.25 3.5C5.16 3.5 3.5 5.16 3.5 7.25c.002.146.014.292.035.436l.004.036.001.008Z"></path></svg>
        </template>
        <template x-if="icon === 'render'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>
        </template>
        <template x-if="icon === 'remove'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"></path></svg>
        </template>
        <template x-if="icon === 'edit'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"></path></svg>
        </template>
        <template x-if="icon === 'scope'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="m8.533.133 5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667l5.25-1.68a1.748 1.748 0 0 1 1.066 0Zm-.61 1.429.001.001-5.25 1.68a.251.251 0 0 0-.174.237V7c0 1.36.275 2.666 1.057 3.859.784 1.194 2.121 2.342 4.366 3.298a.196.196 0 0 0 .154 0c2.245-.957 3.582-2.103 4.366-3.297C13.225 9.666 13.5 8.358 13.5 7V3.48a.25.25 0 0 0-.174-.238l-5.25-1.68a.25.25 0 0 0-.153 0ZM9.5 6.5c0 .536-.286 1.032-.75 1.3v2.45a.75.75 0 0 1-1.5 0V7.8A1.5 1.5 0 1 1 9.5 6.5Z"></path></svg>
        </template>
        <template x-if="icon === 'permission'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M7.467.133a1.748 1.748 0 0 1 1.066 0l5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667Zm.61 1.429a.25.25 0 0 0-.153 0l-5.25 1.68a.25.25 0 0 0-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.196.196 0 0 0 .154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.251.251 0 0 0-.174-.237l-5.25-1.68ZM8.75 4.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 1.5 0ZM9 10.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>
        </template>
        <template x-if="icon === 'docs'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z"></path></svg>
        </template>
        <template x-if="icon === 'plus'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"></path></svg>
        </template>
        <template x-if="icon === 'minus'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 7.75A.75.75 0 0 1 2.75 7h10a.75.75 0 0 1 0 1.5h-10A.75.75 0 0 1 2 7.75Z"></path></svg>
        </template>
        <template x-if="icon === 'user'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M10.561 8.073a6.005 6.005 0 0 1 3.432 5.142.75.75 0 1 1-1.498.07 4.5 4.5 0 0 0-8.99 0 .75.75 0 0 1-1.498-.07 6.004 6.004 0 0 1 3.431-5.142 3.999 3.999 0 1 1 5.123 0ZM10.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path></svg>
        </template>
        <template x-if="icon === 'repository'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z"></path></svg>
        </template>
        <template x-if="icon === 'organization'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M1.75 16A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.749.749 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v5.965A1.75 1.75 0 0 1 14.25 16h-3.5a.766.766 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75Zm-.25-1.75c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM3.75 6h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 3.75A.75.75 0 0 1 3.75 3h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 3.75Zm4 3A.75.75 0 0 1 7.75 6h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 7 6.75ZM7.75 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 9.75A.75.75 0 0 1 3.75 9h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 9.75ZM7.75 9h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z"></path></svg>
        </template>
        <template x-if="icon === 'mime'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2.5a.75.75 0 0 1-1.5 0Zm1.72 4.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.47-1.47-1.47-1.47a.75.75 0 0 1 0-1.06ZM3.28 7.78 1.81 9.25l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Zm8.22-6.218V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg>
        </template>
        <template x-if="icon === 'any'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8.5.75a.75.75 0 0 0-1.5 0v5.19L4.391 3.33a.75.75 0 1 0-1.06 1.061L5.939 7H.75a.75.75 0 0 0 0 1.5h5.19l-2.61 2.609a.75.75 0 1 0 1.061 1.06L7 9.561v5.189a.75.75 0 0 0 1.5 0V9.56l2.609 2.61a.75.75 0 1 0 1.06-1.061L9.561 8.5h5.189a.75.75 0 0 0 0-1.5H9.56l2.61-2.609a.75.75 0 0 0-1.061-1.06L8.5 5.939V.75Z"></path></svg>
        </template>
        <template x-if="icon === 'valid'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm3.457 6.957a.999.999 0 1 0-1.414-1.414L7.25 8.336 5.957 7.043a.999.999 0 1 0-1.414 1.414l2 2a.999.999 0 0 0 1.414 0Z"></path></svg>
        </template>
        <template x-if="icon === 'invalid'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2.343 13.657A8 8 0 1 1 13.658 2.343 8 8 0 0 1 2.343 13.657ZM6.03 4.97a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L6.94 8 4.97 9.97a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L8 9.06l1.97 1.97a.749.749 0 0 0 1.275-.326.749.749 0 0 0-.215-.734L9.06 8l1.97-1.97a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L8 6.94Z"></path></svg>
        </template>
        <template x-if="icon === 'processing'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" width="17" height="16"><path d="M.5 8a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm3.427-4.323a.25.25 0 0 0-.427.177V6c0 .138.112.25.25.25h2.146a.25.25 0 0 0 .177-.427l-.524-.524a4.003 4.003 0 0 1 6.862 1.858.75.75 0 0 0 1.467-.314 5.502 5.502 0 0 0-9.39-2.605Zm9.573 8.469V10a.25.25 0 0 0-.25-.25h-2.146a.25.25 0 0 0-.177.427l.524.524a4.002 4.002 0 0 1-6.862-1.858.75.75 0 0 0-1.467.314 5.502 5.502 0 0 0 9.39 2.605l.561.561a.25.25 0 0 0 .427-.177ZM10 8a1.5 1.5 0 1 0-3.001.001A1.5 1.5 0 0 0 10 8Z"></path></svg>
        </template>
        <template x-if="icon === 'empty'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm11.333-2.167a.825.825 0 0 0-1.166-1.166l-5.5 5.5a.825.825 0 0 0 1.166 1.166Z"></path></svg>
        </template>
        <template x-if="icon === 'import'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M2 1.75C2 .784 2.784 0 3.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 12.25 15h-7a.75.75 0 0 1 0-1.5h7a.25.25 0 0 0 .25-.25V6H9.75A1.75 1.75 0 0 1 8 4.25V1.5H3.75a.25.25 0 0 0-.25.25V4.5a.75.75 0 0 1-1.5 0Zm-.5 10.487v1.013a.75.75 0 0 1-1.5 0v-1.012a3.748 3.748 0 0 1 3.77-3.749L4 8.49V6.573a.25.25 0 0 1 .42-.183l2.883 2.678a.25.25 0 0 1 0 .366L4.42 12.111a.25.25 0 0 1-.42-.183V9.99l-.238-.003a2.25 2.25 0 0 0-2.262 2.25Zm8-10.675V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg>
        </template>
        <template x-if="icon === 'rocket'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M14.064 0h.186C15.216 0 16 .784 16 1.75v.186a8.752 8.752 0 0 1-2.564 6.186l-.458.459c-.314.314-.641.616-.979.904v3.207c0 .608-.315 1.172-.833 1.49l-2.774 1.707a.749.749 0 0 1-1.11-.418l-.954-3.102a1.214 1.214 0 0 1-.145-.125L3.754 9.816a1.218 1.218 0 0 1-.124-.145L.528 8.717a.749.749 0 0 1-.418-1.11l1.71-2.774A1.748 1.748 0 0 1 3.31 4h3.204c.288-.338.59-.665.904-.979l.459-.458A8.749 8.749 0 0 1 14.064 0ZM8.938 3.623h-.002l-.458.458c-.76.76-1.437 1.598-2.02 2.5l-1.5 2.317 2.143 2.143 2.317-1.5c.902-.583 1.74-1.26 2.499-2.02l.459-.458a7.25 7.25 0 0 0 2.123-5.127V1.75a.25.25 0 0 0-.25-.25h-.186a7.249 7.249 0 0 0-5.125 2.123ZM3.56 14.56c-.732.732-2.334 1.045-3.005 1.148a.234.234 0 0 1-.201-.064.234.234 0 0 1-.064-.201c.103-.671.416-2.273 1.15-3.003a1.502 1.502 0 1 1 2.12 2.12Zm6.94-3.935c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213ZM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>
        </template>
        <template x-if="icon === 'experimental'">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"></path></svg>
        </template>
      </div>
    </template>

    <!-- Alpine component: schema inputs (inputs:Record<PropertyKey, unknown>, path:string[], trim:RegExp|undefined, model:Record<PropertyKey, unknown>) -->
    <template x-component="schema-inputs">
      <div>
        <template x-for="(input, name) in inputs.properties">
          <div :key="name" x-data="{subpath:[...path, name]}">
            <!-- Input name and description -->
            <div class="block mb-2" x-init="model[name] = app.getDefaultValue(input)">
              <div class="font-bold">
                <span x-text="app.formatKeyPath(subpath, {trim})"></span>
                <template x-data="{labels:[
                  {key:'format', text:{uri:'url'}[input.format]},
                  {key:'const', text:`const: ${input.type === 'string' ? '&quot;' : ''}${input.const}${input.type === 'string' ? '&quot;' : ''}`},
                  {key:'integer', text:'integer'},
                  {key:'exclusiveMinimum', text:`&gt; ${input.exclusiveMinimum}`},
                  {key:'minimum', text:`≥ ${input.minimum}`},
                  {key:'exclusiveMaximum', text:`&lt; ${input.exclusiveMaximum}`},
                  {key:'maximum', text:`≤ ${input.maximum}`},
                  {key:'writeOnly', text:'secret'},
                  ...(input.type === 'null' ? [{key:'type', text:'null'}] : []),
                ].filter(({key}) => key in input)}" x-for="{key, text} in labels">
                  <span :key="key" class="bg-cyan-100 text-indigo-700 px-1.5 text-sm mr-1 rounded-full whitespace-nowrap"><span x-text="text"></span></span>
                </template>
              </div>
              <template x-if="input.description && !input.subtype">
                <div x-html="await app.markdown(input.description.replace('(textarea)', '').replace(/\(placeholder: `[\s\S]+`\)/, ''))" class="text-zinc-400 italic"></div>
              </template>
            </div>
            <!-- Boolean input -->
            <template x-if="input.type === 'boolean' && (!('const' in input))">
              <label class="inline-block relative h-6 w-12 cursor-pointer">
                <input x-model="model[name]" type="checkbox" class="peer hidden">
                <span class="absolute inset-0 rounded-full bg-gray-700 transition peer-checked:bg-sky-500"></span>
                <span class="absolute inset-y-0 start-0 m-1 h-4 w-4 rounded-full bg-white transition-all peer-checked:start-6"></span>
              </label>
            </template>
            <!-- Number input -->
            <template x-if="input.type === 'number' || input.type === 'integer'">
              <label>
                <input x-model="model[name]" :placeholder="app.getPlaceholder(input)" :min="input.minimum ?? (input.exclusiveMinimum + 1)" :max="input.maximum ?? (input.exclusiveMaximum - 1)" type="number" class="w-full bg-gray-950 px-3 py-1.5 border border-gray-800 rounded-md outline-none focus:border-sky-500">
              </label>
            </template>
            <!-- String input -->
            <template x-if="input.type === 'string' && !input.const">
              <label>
                <template x-if="input.description?.includes('(textarea)')">
                  <textarea x-model="model[name]" :placeholder="app.getPlaceholder(input)" class="w-full bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500 min-h-[4em]"></textarea>
                </template>
                <template x-if="!input.description?.includes('(textarea)')">
                  <input x-model="model[name]" :type="{uri:'url'}[input.format] ?? 'text'" :pattern="input.pattern || '[\\s\\S]+'" :placeholder="app.getPlaceholder(input)" class="w-full bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                </template>
              </label>
            </template>
            <!-- Enum input -->
            <template x-if="input.anyOf && input.anyOf.every(item => item.const)">
              <fieldset>
                <template x-for="(item, k) in input.anyOf">
                  <div :key="item.const" class="mb-1">
                    <input x-model="model[name]" :id="`${subpath.join('.')}@${item.const}`" :name="subpath.join('.')" :value="item.const" type="radio" class="peer hidden">
                    <label :for="`${subpath.join('.')}@${item.const}`" class="block px-3 py-1.5 border border-gray-800 rounded-md cursor-pointer text-zinc-400 transition hover:bg-gray-800 peer-checked:border-sky-500 peer-checked:text-sky-500">
                      <div x-text="item.const" class="text-white"></div>
                      <div x-html="await app.markdown(item.description)" class="text-zinc-400 italic"></div>
                    </label>
                  </div>
                </template>
              </fieldset>
            </template>
            <!-- Object input -->
            <template x-if="input.type === 'object'">
              <div class="w-full p-2 rounded-md border border-gray-800">
                <x-schema-inputs x-data="{inputs:input, path:subpath, trim, model:model[name]}" class="w-full"></x-schema-inputs>
                <!-- Record inputs -->
                <template x-if="input.additionalProperties">
                  <div>
                    <template x-for="(_, key) in model[name]">
                      <div :key="key" class="p-2 bg-gray-950 border border-gray-800 rounded-md mb-2">
                        <div class="flex">
                          <input :value="key" type="text" disabled class="grow bg-gray-950 rounded-md px-3 py-1.5 outline-none">
                          <div @click="delete model[name][key]" class="bg-red-950 flex items-center rounded-md p-2 border border-gray-800 cursor-pointer transition hover:bg-red-800">
                            <x-octicon x-data="{icon:'minus'}" class="text-white"></x-octicon>
                          </div>
                        </div>
                        <template x-if="input.additionalProperties.properties">
                          <div class="m-1 mb-0">
                            <x-schema-inputs x-data="{inputs:input.additionalProperties, path:[...subpath, key], trim, model:model[name][key]}"></x-schema-inputs>
                          </div>
                        </template>
                        <template x-if="!input.additionalProperties.properties">
                          <div class="flex">
                            <input x-model="model[name][key]" type="text" placeholder="Add a new value" class="opacity-50 grow bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                          </div>
                        </template>
                      </div>
                    </template>
                    <template x-if="input.additionalProperties.properties">
                      <div x-data="{key:'', buffer:{}}">
                        <div class="flex">
                          <input x-model="key" @keyup.enter="key ? (model[name][key] = buffer, key = '', buffer = {}) : null" type="text" placeholder="Add a new key" class="opacity-50 grow bg-gray-800 rounded-l-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                          <div :class="{'opacity-50 cursor-not-allowed':!key, 'cursor-pointer':key}" @click="key ? (model[name][key] = buffer, key = '', buffer = {}) : null" class="bg-green-950 flex items-center rounded-r-md p-2 border border-gray-800 transition hover:bg-green-800">
                            <x-octicon x-data="{icon:'plus'}" class="text-white"></x-octicon>
                          </div>
                        </div>
                        <div class="m-1 mb-0">
                          <x-schema-inputs x-data="{inputs:input.additionalProperties, path:[...subpath, '*'], trim, model:buffer}"></x-schema-inputs>
                        </div>
                      </div>
                    </template>
                    <template x-if="!input.additionalProperties.properties">
                      <div x-data="{key:'', buffer:''}" class="p-2 rounded-md border border-gray-800 bg-gray-950">
                        <div class="flex">
                          <input x-model="key" @keyup.enter="key ? (model[name][key] = buffer, key = '', buffer = '') : null" type="text" placeholder="Add a new key" class="opacity-50 grow bg-gray-800 rounded-l-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                          <div :class="{'opacity-50 cursor-not-allowed':!key, 'cursor-pointer':key}" @click="key ? (model[name][key] = buffer, key = '', buffer = '') : null" class="bg-green-950 flex items-center rounded-r-md p-2 border border-gray-800 transition hover:bg-green-800">
                            <x-octicon x-data="{icon:'plus'}" class="text-white"></x-octicon>
                          </div>
                        </div>
                        <div class="flex">
                          <input x-model="buffer" @keyup.enter="key ? (model[name][key] = buffer, key = '', buffer = '', $el.parentElement.parentElement.querySelector('[x-model=key]').focus()) : null" type="text" placeholder="Add a new value" class="opacity-50 grow bg-gray-950 rounded-md px-3 py-1.5 border border-gray-800 outline-none focus:border-sky-500">
                        </div>
                      </div>
                    </template>
                  </div>
                </template>
              </div>
            </template>
            <!-- Multi-type inputs (anyOf) -->
            <template x-if="input.anyOf && input.anyOf.some(item => !item.const)">
              <fieldset x-data="{choice:app.findDefaultValue(input)}">
                <template x-for="(value, i) of input.anyOf">
                  <div :key="i" x-data="{modeled:{[name]:null}}" class="mb-1">
                    <input @change="model[name] = modeled[name]" x-model="choice" :id="`${subpath.join('.')}@${i}`" :name="`${subpath.join('.')}@`" :value="i" type="radio" class="anyof peer hidden">
                    <label :for="`${subpath.join('.')}@${i}`" class="block px-3 py-1.5 border border-dashed border-gray-500 rounded-md cursor-pointer transition hover:border-sky-500 peer-checked:border-sky-500 peer-checked:border-solid">
                      <x-schema-inputs x-data="{inputs:{properties:{[name]:value}}, path:[...path, `${name}@${i}`], trim, model:modeled}" class="w-full"></x-schema-inputs>
                    </label>
                  </div>
                </template>
              </fieldset>
            </template>
          </div>
        </template>
      </div>
    </template>
    <script src="/static/app.js" type="module"></script>
  </body>
</html>